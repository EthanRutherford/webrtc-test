{"entry":"/jenny.js","files":{"jenny.js":{"/code":"function deepAssign(e,t){if(!canAssign(e)||!canAssign(t))return t;for(const r in t)e[r]=deepAssign(e[r],t[r]);return e}function jController(e,t){if(e.length>2||0===e.length)throw new Error(\"bad tag\");const r=okToConstruct=e[0],o=new r,n=Object.assign({children:t},e[1]);n.ref&&(o._ref=n.ref,delete n.ref),o.props=n,validate(!0,r.name,\"\",o.props,PropTypes.shapeOf(r.propTypes||{}));const s=o.init();return null!==s&&(s.controller=o,privacyMap.set(o,s)),o}function j(e,t=[]){if(e instanceof Array)return jController(e,t);if(1!==Object.keys(e).length)throw new Error(\"bad tag\");const r=Object.keys(e)[0],o=Object.assign({},e[r]),n=document.createElement(r);o.ref&&(n._ref=o.ref,delete o.ref);for(const e of Object.keys(o))n[e]=o[e];return n.append(...t.filter(e=>null!=e)),n}function prepareNode(e){return e instanceof Controller?e.model:e}function attach(e){for(const t of e.children||[])attach(t);e._ref instanceof Function&&e._ref(e),e.controller&&(e.controller._ref instanceof Function&&e.controller._ref(e.controller),e.controller.didMount instanceof Function&&e.controller.didMount())}function detach(e){for(const t of e.children||[])detach(t);e._ref instanceof Function&&e._ref(null),e.controller&&(e.controller._ref instanceof Function&&e.controller._ref(null),e.controller.didUnmount instanceof Function&&e.controller.didUnmount())}function observerCallback(e){for(const t of e){for(const e of t.addedNodes)attach(e);for(const e of t.removedNodes)detach(e)}}function validate(e,t,r,o,n,s=n.name){null!=o?n.prototype?o.constructor===n||o instanceof n||console.warn(`Failed propType '${r}: ${s}' in ${t}`):n(t,r,o):e&&console.warn(`Missing prop '${r}: ${s}' in ${t}`)}const privacyMap=new WeakMap;let okToConstruct=null;const indexModulo=(e,t)=>e<0?e%t+t:e,canAssign=e=>e&&e.constructor===Object||e instanceof Array;class JennyContentArray extends Array{constructor(...e){super(...e)}push(...e){return super.push.call(this,...this._parent.append(...e))}pop(){return super.pop.call(this).remove()}unshift(...e){return super.unshift.call(this,...this._parent.prepend(...e))}shift(){return super.shift.call(this).remove()}sort(e){return super.sort.call(this,e),this._parent.append(...this),this}reverse(){return super.reverse.call(this),this._parent.append(...this),this}splice(e,t,...r){return e=indexModulo(e,this.length),this[e]?this[e].before(...r):this._parent.append(...r),super.splice.call(this,e,t,...r).map(e=>e.remove())}replace(e,...t){const r=this[e].replaceWith(...t);super.splice.call(this,e,1,...r)}}class JennyElement extends Element{get content(){const e=new JennyContentArray(...this.childNodes);return e._parent=this,e}set content(e){for(;this.lastChild;)this.lastChild.remove();this.append(...e)}get computedStyle(){return getComputedStyle(this)}get class(){return this.classList}set class(e){return this.classList=e}}class Controller{constructor(){if(this.constructor!==okToConstruct)throw new Error(\"Illegal constructor\");const e=Object.getOwnPropertyDescriptors(this.__proto__),t=Object.keys(e).filter(t=>![\"constructor\",\"init\"].includes(t)&&e[t].value instanceof Function);for(const e of t)this[e]=this[e].bind(this);this.props={},okToConstruct=null}init(){return null}updateProps(e){const t=deepAssign({},this.props);this.props=deepAssign(this.props,e),validate(!0,this.constructor.name,\"\",this.props,PropTypes.shapeOf(this.constructor.propTypes||{})),this.propsChanged instanceof Function&&this.propsChanged(t)}get model(){return privacyMap.get(this)}remove(){this.model.remove()}}!function(){function e(e,t=!1){return function(...r){return r=r.map(e=>prepareNode(e)),e.call(this,...r),observerCallback(observer.takeRecords()),t?this:r}}function t(e){return function(...t){const r=e.call(this,...t);return observerCallback(observer.takeRecords()),r}}!function(t){for(const r of t)r.before=e(r.before),r.after=e(r.after),r.replaceWith=e(r.replaceWith),r.remove=e(r.remove,!0)}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),function(t){for(const r of t)r.append=e(r.append),r.prepend=e(r.prepend)}([Element.prototype,Document.prototype,DocumentFragment.prototype]),Node.prototype.appendChild=t(Node.prototype.appendChild),Node.prototype.insertBefore=t(Node.prototype.insertBefore),Node.prototype.removeChild=t(Node.prototype.removeChild),Node.prototype.replaceChild=t(Node.prototype.replaceChild),HTMLElement.prototype.__proto__=JennyElement.prototype}();const observer=new MutationObserver(observerCallback);observer.observe(document.body,{childList:!0,subtree:!0});const PropTypes={required:e=>(t,r,o)=>{validate(!0,t,r,o,e)},arrayOf:e=>(t,r,o)=>{validate(!1,t,r,o,Array);for(const n of o)validate(!1,t,r,n,e,`arrayOf(${e.name})`)},shapeOf:e=>(t,r,o)=>{validate(!1,t,r,o,Object);for(const r in e)validate(!1,t,r,o[r],e[r])}};module.exports={Controller:Controller,j:j,PropTypes:PropTypes};"}},"/deps":[]}